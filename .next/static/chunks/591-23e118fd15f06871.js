"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[591],{8969:function(t,e,n){var i=n(5893),r=(n(7294),n(1664)),a=n.n(r);e.Z=function(){return(0,i.jsx)("div",{className:"bg-yellow-300 font-spaceGrotesk",children:(0,i.jsx)("div",{className:"flex justify-between p-5 max-w-7xl mx-auto",children:(0,i.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,i.jsx)(a(),{href:"/",children:(0,i.jsx)("h3",{className:"-mt-1 object-contain cursor-pointer font-mono font-bold underline decoration-black decoration-8",children:"Musicam"})}),(0,i.jsxs)("div",{className:"hidden sm:inline-flex items-center space-x-5",children:[(0,i.jsx)("h3",{className:"",children:"About"}),(0,i.jsx)("h3",{children:"Instructions"})]})]})})})}},2719:function(t,e,n){n.d(e,{_b:function(){return g},Cg:function(){return m},i1:function(){return p},uo:function(){return b},MJ:function(){return l},xi:function(){return s},eX:function(){return y},yF:function(){return u},dd:function(){return f},Oe:function(){return v},Dm:function(){return h},Fd:function(){return x},Hv:function(){return j}});var i=n(828),r=n(5108),a=n(9080),o=(0,r.ZF)({apiKey:"AIzaSyDXAD2r8_uwUpwYati-mcc00AyzI6XNGgk",authDomain:"musicam-data.firebaseapp.com",databaseURL:"https://musicam-data-default-rtdb.europe-west1.firebasedatabase.app",projectId:"musicam-data",storageBucket:"musicam-data.appspot.com",messagingSenderId:"1031964669501",appId:"1:1031964669501:web:de0fdc24b205ff6367dc54"}),c=(0,a.N8)(o);function s(t){return 316501395===t?1:316503283===t?2:3}function u(t){for(var e=0;e<t.length;e++)try{var n=JSON.parse(t[e]),r=n.nodeId,a=s(r),o=(0,i.Z)(n.aimPos,4),c=o[0],u=o[1];d(a,r,o[2],o[3],c,u,n.sameHeight,!0)}catch(l){continue}}function d(t,e,n,i,r,o,s,u){(0,a.t8)((0,a.iH)(c,"cameras/"+t),{node_id:e,xbegin:n,ybegin:i,xend:r,yend:o,sameHeight:s,active:u})}function l(t){var e=(0,a.N8)(),n=0,i=0,r=0,o=0,c=!1,s=!1;return(0,a.jM)((0,a.iH)(e,"cameras/"+t),(function(t){n=t.val().xbegin,i=t.val().xend,r=t.val().ybegin,o=t.val().yend,c=t.val().sameHeight,s=t.val().active})),[n,i,r,o,c,s]}function f(t){try{!function(t){var e=(0,a.N8)();(0,a.t8)((0,a.iH)(e,"stage/"),{depth:t})}(JSON.parse(t).stageDepth)}catch(e){return}}function h(t){var e=(0,a.N8)();(0,a.t8)((0,a.iH)(e,"admin"),{active:t})}function v(){for(var t=(0,a.N8)(),e=1;e<5;e++)d(e,0,0,0,0,0,!1,!1),(0,a.t8)((0,a.iH)(t,"names/"+e),{name:e.toString()}),(0,a.t8)((0,a.iH)(t,"messages/"+e),{message:""})}function m(){var t=(0,a.N8)(),e=(0,a.iH)(t,"cameras"),n=[];return(0,a.jM)(e,(function(t){t.forEach((function(t){!0===t.val().active&&n.push(t.val().node_id)}))})),n}function g(){var t=(0,a.N8)(),e=(0,a.iH)(t,"cameras"),n=[];return(0,a.jM)(e,(function(t){t.forEach((function(t){!0===t.val().active&&n.push(b(t.key))}))})),n}function p(){var t=(0,a.N8)(),e=!1;return(0,a.jM)((0,a.iH)(t,"admin/active"),(function(t){e=t.val()})),e}function x(t,e){var n=(0,a.N8)();(0,a.t8)((0,a.iH)(n,"names/"+e),{name:t})}function b(t){var e=(0,a.N8)(),n=t.toString();return(0,a.jM)((0,a.iH)(e,"names/"+t),(function(t){n=t.val()})),n}function y(){var t=(0,a.N8)(),e=0;return(0,a.jM)((0,a.iH)(t,"stage/"),(function(t){e=t.val().depth})),e}function j(t,e){var n=(0,a.N8)();"string"===typeof t&&(t=function(t){var e=(0,a.N8)(),n=1;return(0,a.jM)((0,a.iH)(e,"names/"),(function(e){e.forEach((function(e){e.val().name===t&&(n=e.key)}))})),n}(t)),(0,a.t8)((0,a.iH)(n,"messages/"+t),{message:e})}},3874:function(t,e,n){n.d(e,{i:function(){return v}});var i=n(1438),r=n(2951),a=n(8029),o=n(6567),c=n(5893),s=n(7294),u=n(828),d=function(t,e,n,i,r){if(t){console.log(r);var a=t.innerWidth,o=t.innerHeight,c=null===e||void 0===e?void 0:e.clientWidth,s=e?(null===e||void 0===e?void 0:e.clientWidth)*r<(null===e||void 0===e?void 0:e.clientHeight)?(null===e||void 0===e?void 0:e.clientWidth)*r:null===e||void 0===e?void 0:e.clientHeight:void 0,u=a*n,d=o*i;return c&&s&&(u=Math.round(c*n),d=Math.round(s*i)),[u,d]}return[n,i]},l=function(t){var e=(0,s.useState)(null),n=e[0],i=e[1],r=(0,s.useState)(void 0),a=r[0],o=r[1];(0,s.useEffect)((function(){i(document.getElementById("container")),o(window)}),[document,window]);return(0,c.jsx)("div",{className:"",children:function(){var e=[];return t.names.map((function(i,r){var o="string"===typeof i?i:i.name,s=Math.abs(t.stageDepth)>1?1:Math.abs(t.stageDepth),l=(0,u.Z)(d(a,n,t.beginCoordinates[0][r],t.beginCoordinates[1][r],s),2),f=l[0],h=l[1],v=(0,u.Z)(d(a,n,t.endCoordinates[0][r],t.endCoordinates[1][r],s),2),m=v[0],g=v[1],p=null===n||void 0===n?void 0:n.offsetLeft,x=null===n||void 0===n?void 0:n.offsetTop,b=null===n||void 0===n?void 0:n.clientWidth,y=n?(null===n||void 0===n?void 0:n.clientWidth)*s<(null===n||void 0===n?void 0:n.clientHeight)?(null===n||void 0===n?void 0:n.clientWidth)*s:null===n||void 0===n?void 0:n.clientHeight:void 0;e.push((0,c.jsxs)("div",{className:"absolute border-2 border-blue-800",style:{top:x,left:p,width:b,height:y},children:[(0,c.jsx)("div",{children:(0,c.jsxs)("svg",{className:"absolute",style:{top:0,left:0,width:"100%",height:"100%"},children:[(0,c.jsx)("line",{x1:f,y1:h,x2:m,y2:g,stroke:t.currentId===t.ids[r]?"tomato":"darkblue",strokeWidth:"7"}),t.sameHeight[r]?null:(0,c.jsx)("circle",{cx:m,cy:g,r:"30",fill:t.currentId===t.ids[r]?"tomato":"violet"}),t.sameHeight[r]?(0,c.jsxs)("g",{children:[(0,c.jsx)("rect",{x:(f+m)/2-35,y:(h+g)/2-15,width:"70",height:"30",transform:"rotate(".concat(180*Math.atan((g-h)/(m-f))/Math.PI,", ").concat((f+m)/2,", ").concat((h+g)/2,")"),fill:t.currentId===t.ids[r]?"tomato":"darkblue",rx:"25",ry:"100"}),(0,c.jsx)("text",{x:(f+m)/2,y:(h+g)/2,textAnchor:"middle",alignmentBaseline:"middle",fontSize:"15",transform:"rotate(".concat(180*Math.atan((g-h)/(m-f))/Math.PI,", ").concat((f+m)/2,", ").concat((h+g)/2,")"),fill:t.currentId===t.ids[r]?"darkblue":"violet",children:t.currentId===t.ids[r]?"You":o})]}):(0,c.jsxs)("g",{children:[(0,c.jsx)("circle",{cx:m,cy:g,r:"30",fill:t.currentId===t.ids[r]?"tomato":"violet"}),(0,c.jsx)("text",{x:m,y:g,textAnchor:"middle",alignmentBaseline:"middle",fontSize:"15",fill:(t.currentId,t.ids[r],"darkblue"),children:t.currentId===t.ids[r]?"You":o})]})]})}),(0,c.jsx)("div",{children:b&&y&&(0,c.jsx)("div",{className:"",children:(0,c.jsxs)("svg",{className:"absolute",style:{top:0,left:0,width:"100%",height:"100%"},children:[(0,c.jsx)("text",{x:b/2,y:20,textAnchor:"middle",alignmentBaseline:"middle",fontSize:"15",fill:"darkblue",children:"Back of Stage"}),(0,c.jsx)("rect",{x:0,y:0,width:"20",height:"20",fill:"darkblue"}),(0,c.jsx)("rect",{x:b-20,y:0,width:"20",height:"20",fill:"darkblue"}),(0,c.jsx)("rect",{x:0,y:y-20,width:"20",height:"20",fill:"darkblue"}),(0,c.jsx)("rect",{x:b-20,y:y-20,width:"20",height:"20",fill:"darkblue"})]})})})]},r))})),e}()})},f=n(9080),h=n(2719),v=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this)).state={selectedId:t.selectedId,ids:[],xbegin:[],xend:[],ybegin:[],yend:[],sameHeight:[],active:[],names:[],depth:1},r}return(0,r.Z)(n,[{key:"getCameraData",value:function(){var t=(0,h.Cg)(),e=(0,h.eX)(),n=[];t.forEach((function(t){n.push((0,h.xi)(t))}));for(var i=[],r=[],a=[],o=[],c=[],s=[],u=[],d=1;d<=n.length;d++){var l=(0,h.MJ)(d);i.push(l[0]),r.push(l[1]),a.push(l[2]),o.push(l[3]),c.push(l[4]),s.push(l[5]);var f=(0,h.uo)(d);u.push(f)}this.setState({ids:n,xbegin:i,xend:r,ybegin:a,yend:o,sameHeight:c,active:s,names:u,depth:e})}},{key:"componentDidMount",value:function(){var t=this;(0,f.jM)((0,f.iH)((0,f.N8)(),"cameras"),(function(e){t.getCameraData()})),(0,f.jM)((0,f.iH)((0,f.N8)(),"names"),(function(e){t.getCameraData()})),(0,f.jM)((0,f.iH)((0,f.N8)(),"stage"),(function(e){t.getCameraData()})),window.addEventListener("resize",this.getCameraData.bind(this))}},{key:"render",value:function(){return(0,c.jsxs)("div",{children:[console.log(this.state),(0,c.jsx)(l,{currentId:this.state.selectedId,ids:this.state.ids,names:this.state.names,beginCoordinates:[this.state.xbegin,this.state.ybegin],endCoordinates:[this.state.xend,this.state.yend],sameHeight:this.state.sameHeight,stageDepth:this.state.depth})]})}}]),n}(s.Component)},1438:function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return i}})},2951:function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,{Z:function(){return r}})},6567:function(t,e,n){function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function r(t){return i(t)}function a(t,e){return!e||"object"!==((n=e)&&n.constructor===Symbol?"symbol":typeof n)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var n}function o(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}n.d(e,{Z:function(){return o}})},8029:function(t,e,n){function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}n.d(e,{Z:function(){return r}})}}]);