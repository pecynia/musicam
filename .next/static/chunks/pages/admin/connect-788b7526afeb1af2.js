(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{847:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/connect",function(){return n(5577)}])},8969:function(e,t,n){"use strict";var r=n(5893),a=(n(7294),n(1664)),s=n.n(a);t.Z=function(){return(0,r.jsx)("div",{className:"bg-yellow-300 font-spaceGrotesk",children:(0,r.jsx)("div",{className:"flex justify-between p-5 max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,r.jsx)(s(),{href:"/",children:(0,r.jsx)("h3",{className:"-mt-1 object-contain cursor-pointer font-mono font-bold underline decoration-black decoration-8",children:"Musicam"})}),(0,r.jsxs)("div",{className:"hidden sm:inline-flex items-center space-x-5",children:[(0,r.jsx)("h3",{className:"",children:"About"}),(0,r.jsx)("h3",{children:"Instructions"})]})]})})})}},2719:function(e,t,n){"use strict";n.d(t,{_b:function(){return p},Cg:function(){return x},i1:function(){return v},uo:function(){return g},MJ:function(){return d},xi:function(){return o},eX:function(){return y},yF:function(){return l},dd:function(){return f},Oe:function(){return h},Dm:function(){return m},Fd:function(){return j},Hv:function(){return b}});var r=n(828),a=n(5108),s=n(9080),i=(0,a.ZF)({apiKey:"AIzaSyDXAD2r8_uwUpwYati-mcc00AyzI6XNGgk",authDomain:"musicam-data.firebaseapp.com",databaseURL:"https://musicam-data-default-rtdb.europe-west1.firebasedatabase.app",projectId:"musicam-data",storageBucket:"musicam-data.appspot.com",messagingSenderId:"1031964669501",appId:"1:1031964669501:web:de0fdc24b205ff6367dc54"}),c=(0,s.N8)(i);function o(e){return 316501395===e?1:316503283===e?2:3}function l(e){for(var t=0;t<e.length;t++)try{var n=JSON.parse(e[t]),a=n.nodeId,s=o(a),i=(0,r.Z)(n.aimPos,4),c=i[0],l=i[1];u(s,a,i[2],i[3],c,l,n.sameHeight,!0)}catch(d){continue}}function u(e,t,n,r,a,i,o,l){(0,s.t8)((0,s.iH)(c,"cameras/"+e),{node_id:t,xbegin:n,ybegin:r,xend:a,yend:i,sameHeight:o,active:l})}function d(e){var t=(0,s.N8)(),n=0,r=0,a=0,i=0,c=!1,o=!1;return(0,s.jM)((0,s.iH)(t,"cameras/"+e),(function(e){n=e.val().xbegin,r=e.val().xend,a=e.val().ybegin,i=e.val().yend,c=e.val().sameHeight,o=e.val().active})),[n,r,a,i,c,o]}function f(e){try{!function(e){var t=(0,s.N8)();(0,s.t8)((0,s.iH)(t,"stage/"),{depth:e})}(JSON.parse(e).stageDepth)}catch(t){return}}function m(e){var t=(0,s.N8)();(0,s.t8)((0,s.iH)(t,"admin"),{active:e})}function h(){for(var e=(0,s.N8)(),t=1;t<5;t++)u(t,0,0,0,0,0,!1,!1),(0,s.t8)((0,s.iH)(e,"names/"+t),{name:t.toString()}),(0,s.t8)((0,s.iH)(e,"messages/"+t),{message:""})}function x(){var e=(0,s.N8)(),t=(0,s.iH)(e,"cameras"),n=[];return(0,s.jM)(t,(function(e){e.forEach((function(e){!0===e.val().active&&n.push(e.val().node_id)}))})),n}function p(){var e=(0,s.N8)(),t=(0,s.iH)(e,"cameras"),n=[];return(0,s.jM)(t,(function(e){e.forEach((function(e){!0===e.val().active&&n.push(g(e.key))}))})),n}function v(){var e=(0,s.N8)(),t=!1;return(0,s.jM)((0,s.iH)(e,"admin/active"),(function(e){t=e.val()})),t}function j(e,t){var n=(0,s.N8)();(0,s.t8)((0,s.iH)(n,"names/"+t),{name:e})}function g(e){var t=(0,s.N8)(),n=e.toString();return(0,s.jM)((0,s.iH)(t,"names/"+e),(function(e){n=e.val()})),n}function y(){var e=(0,s.N8)(),t=0;return(0,s.jM)((0,s.iH)(e,"stage/"),(function(e){t=e.val().depth})),t}function b(e,t){var n=(0,s.N8)();"string"===typeof e&&(e=function(e){var t=(0,s.N8)(),n=1;return(0,s.jM)((0,s.iH)(t,"names/"),(function(t){t.forEach((function(t){t.val().name===e&&(n=t.key)}))})),n}(e)),(0,s.t8)((0,s.iH)(n,"messages/"+e),{message:t})}},5577:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),a=n(7294),s=n(9008),i=n.n(s),c=n(8969);function o(e,t,n,r,a,s,i){try{var c=e[s](i),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(r,a)}var l=n(943);var u=n(3375);var d=n(1566);function f(e){return function(e){if(Array.isArray(e))return(0,l.Z)(e)}(e)||(0,u.Z)(e)||(0,d.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=n(655),h=(n(9080),n(2719)),x=n(1664),p=n.n(x),v=function(){var e=(0,a.useState)(0),t=e[0],n=e[1],s=(0,a.useState)(!1),i=s[0],c=s[1];(0,h.Dm)(i),(0,h.Oe)();var l=function(){var e,t=(e=function(){var e,t,r,a;return(0,m.__generator)(this,(function(s){switch(s.label){case 0:return[4,navigator.serial.requestPort()];case 1:return[4,(e=s.sent()).open({baudRate:115200})];case 2:s.sent(),n(1),c(!0),(0,h.Dm)(i),t=[],s.label=3;case 3:if(!e.readable)return[3,10];r=e.readable.getReader(),s.label=4;case 4:return s.trys.push([4,7,8,9]),[4,r.read().then((function e(n){var s=n.value;if(n.done)return console.log("Stream complete"),r.cancel(),void(para.textContent=result);var i=f(s);if(t=f(t).concat(f(i)),JSON.stringify(i.slice(i.length-2))===JSON.stringify([13,10])){var c=t.slice(0,t.length-2).map((function(e){return String.fromCharCode(e)}));try{var o=c.join("");console.log(o);var l=o.split("\n"),u=l[0];(0,h.dd)(u);var d=[];if(l.length>1){for(var m=0;m<l.length-1;m++)d.push(l[m+1]);(0,h.yF)(d)}}catch(a){console.log(a)}t=[]}return r.read().then(e)}))];case 5:return s.sent(),[3,4];case 6:return[3,9];case 7:return a=s.sent(),console.log(a),[3,9];case 8:return r.releaseLock(),[7];case 9:return[3,3];case 10:return[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){o(s,r,a,i,c,"next",e)}function c(e){o(s,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return 0==t?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)("div",{className:"text-sm text-left text-yellow-600 underline pl-5 pt-5 px-5",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("a",{href:"https://twcontrols.com/lessons/how-to-tell-what-com-port-your-usb-to-serial-adapter-is-assigned",children:"Locate COM-port on Windows"})})}),(0,r.jsx)("div",{className:"text-sm text-left text-yellow-600 underline pl-5 pt-5 px-5",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("a",{href:"https://www.quora.com/How-do-I-check-what-USB-devices-are-connected-to-a-Mac",children:"Locate your USB port on IOS"})})})]}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("div",{className:"font-spaceGrotesk flex justify-center p-4 max-w-7xl mx-auto",children:(0,r.jsx)("div",{className:"transition group cursor-pointer p-2 bg-yellow-300 px-6 py-1 space-y-5 rounded-3xl sm:rounded-full hover:bg-yellow-700 hover:scale-105",children:(0,r.jsx)("button",{className:"text-sm sm:text-md font-bold text-yellow-700 group-hover:text-yellow-50",onClick:function(){return l()},children:" Connect Serial Port "})})})})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"text-sm text-left text-yellow-600 pl-5 pt-5 px-5",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("h3",{children:"Succesfully connected to local Musicam Mesh Network!"})})})}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"font-spaceGrotesk flex justify-center p-4 max-w-7xl mx-auto",children:(0,r.jsx)("div",{className:"transition group cursor-pointer p-2 bg-fuchsia-300 px-6 py-1 space-y-5 rounded-3xl sm:rounded-full hover:bg-fuchsia-700 hover:scale-105",children:(0,r.jsx)(p(),{href:"/admin/control",children:(0,r.jsx)("h3",{className:"text-sm sm:text-md font-bold text-fuchsia-700 group-hover:text-fuchsia-50",children:"Open Control Panel"})})})})})]})};var j=function(){return(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"musicam.io"}),(0,r.jsx)("link",{rel:"icon",href:"https://cdn-icons-png.flaticon.com/512/92/92201.png"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500;600;700&display=swap"})]}),(0,r.jsx)(c.Z,{}),(0,r.jsxs)("div",{className:"bg-yellow-50 font-spaceGrotesk",children:[(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("img",{src:"https://i.postimg.cc/3wq0M5Kp/camera-man-2.png",className:"object-none w-full h-20"})}),(0,r.jsxs)("div",{className:"pt-7 pb-10 px-10",children:[(0,r.jsx)("div",{className:"max-w-3xl mx-auto bg-yellow-300 rounded-2xl",children:(0,r.jsx)("div",{className:"py-2 pb-3",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-left pl-11 text-yellow-800",children:"Admin"})})}),(0,r.jsxs)("div",{className:"max-w-3xl mx-auto bg-yellow-100 rounded-3xl mt-4",children:[(0,r.jsx)("div",{className:"bg-yellow-200 rounded-t-3xl",children:(0,r.jsx)("h1",{className:"font-bold text-center text-xl text-yellow-800 pt-4 ",children:"Setup Arduino connection"})}),(0,r.jsx)("div",{className:"flex justify-center px-10 pt-3 -mb-5 bg-yellow-200 rounded-b-3xl pb-10",children:(0,r.jsx)("h1",{children:"Connect your Musicam Mesh receiver to a USB slot and select the corresponding COM-port through the button below. If you are not sure which port to select, take a look at the links below for more information."})}),(0,r.jsx)("div",{className:"flex justify-center py-6 pb-3",children:(0,r.jsx)(v,{})})]})]})]})]})}}},function(e){e.O(0,[806,996,654,774,888,179],(function(){return t=847,e(e.s=t);var t}));var t=e.O();_N_E=t}]);